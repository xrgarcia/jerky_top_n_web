=== SENTRY ERROR ANALYSIS REQUEST ===

Issue: JERKY-RANK-UI-5
Title: error: terminating connection due to administrator command
Status: unresolved
Level: fatal
Environment: development

First Seen: 2025-10-11T20:58:43.576000Z
Last Seen: 2025-11-17T00:26:19Z
Event Count: 101
Users Affected: 0

--- ERROR MESSAGE ---
error: terminating connection due to administrator command

--- CULPRIT ---
xn.parseErrorMessage(@neondatabase.serverless:index)

--- STACK TRACE ---
error: terminating connection due to administrator command
  at xn.parseErrorMessage (/home/runner/workspace/node_modules/@neondatabase/serverless/index.js:?:?)
  at xn.handlePacket (/home/runner/workspace/node_modules/@neondatabase/serverless/index.js:?:?)
  at xn.parse (/home/runner/workspace/node_modules/@neondatabase/serverless/index.js:?:?)
  at S.? (/home/runner/workspace/node_modules/@neondatabase/serverless/index.js:?:?)
  at S.emit (/home/runner/workspace/node_modules/@neondatabase/serverless/index.js:?:?)
  at WebSocket.? (/home/runner/workspace/node_modules/@neondatabase/serverless/index.js:?:?)
  at callListener (/home/runner/workspace/node_modules/ws/lib/event-target.js:?:?)
  at WebSocket.onMessage (/home/runner/workspace/node_modules/ws/lib/event-target.js:?:?)
  at WebSocket.emit (node:events:?:?)
  at Receiver.receiverOnMessage (/home/runner/workspace/node_modules/ws/lib/websocket.js:?:?)

--- BREADCRUMBS (Recent Activity) ---
[2025-11-17T00:25:00.933000Z] console (info): â±ï¸ Batch 1 completed in 53ms (getUserStats + getUserPosition + getUserStreaks)
[2025-11-17T00:25:00.933000Z] console (info): ğŸ’¾ Cache HIT: Returning 164 products from cache (age: 3 minutes)
[2025-11-17T00:25:00.939000Z] console (info): ğŸ” getAllUserStreaks: Found 0 valid streak(s) for user 113032
[2025-11-17T00:25:00.940000Z] console (info): â±ï¸ Batch 1 completed in 66ms (getUserStats + getUserPosition + getUserStreaks)
[2025-11-17T00:25:00.940000Z] console (info): ğŸ’¾ Cache HIT: Returning 164 products from cache (age: 3 minutes)
[2025-11-17T00:25:00.949000Z] console (info): ğŸ” getAllUserStreaks: Found 0 valid streak(s) for user 113032
[2025-11-17T00:25:00.949000Z] console (info): â±ï¸ Batch 1 completed in 72ms (getUserStats + getUserPosition + getUserStreaks)
[2025-11-17T00:25:00.949000Z] console (info): ğŸ’¾ Cache HIT: Returning 164 products from cache (age: 3 minutes)
[2025-11-17T00:25:01.008000Z] console (info): ğŸ’¾ Metadata Cache HIT: Returning data (age: 3 minutes)
[2025-11-17T00:25:01.010000Z] console (info): ğŸ’¾ Metadata Cache HIT: Returning data (age: 3 minutes)
[2025-11-17T00:25:01.014000Z] console (info): ğŸ’¾ Metadata Cache HIT: Returning data (age: 3 minutes)
[2025-11-17T00:25:01.026000Z] console (info): â±ï¸ Batch 2 completed in 93ms (getCompletedAnimalCategories)
[2025-11-17T00:25:01.026000Z] console (info): â±ï¸ Total aggregation time: 146ms
[2025-11-17T00:25:01.027000Z] console (info): ğŸ’¾ Metadata Cache HIT: Returning data (age: 3 minutes)
[2025-11-17T00:25:01.028000Z] console (info): â±ï¸ Batch 2 completed in 99ms (getCompletedAnimalCategories)
[2025-11-17T00:25:01.028000Z] console (info): â±ï¸ Total aggregation time: 171ms
[2025-11-17T00:25:01.030000Z] console (info): â±ï¸ Batch 2 completed in 90ms (getCompletedAnimalCategories)
[2025-11-17T00:25:01.030000Z] console (info): â±ï¸ Total aggregation time: 156ms
[2025-11-17T00:25:01.042000Z] console (info): â±ï¸ Batch 2 completed in 93ms (getCompletedAnimalCategories)
[2025-11-17T00:25:01.042000Z] console (info): â±ï¸ Total aggregation time: 165ms
[2025-11-17T00:25:01.063000Z] console (info): ğŸ’¾ AchievementCache HIT: Returning 31 definitions
[2025-11-17T00:25:01.065000Z] console (info): ğŸ’¾ AchievementCache HIT: Returning 31 definitions
[2025-11-17T00:25:01.067000Z] console (info): ğŸ’¾ AchievementCache HIT: Returning 31 definitions
[2025-11-17T00:25:01.078000Z] console (info): ğŸ’¾ AchievementCache HIT: Returning 31 definitions
[2025-11-17T00:25:01.080000Z] console (info): ğŸ“Š ProgressTracker: Found 27 total achievements for user 113032
[2025-11-17T00:25:01.082000Z] console (info):    âœ… Earned: 0 | ğŸ”’ Unearned: 27
[2025-11-17T00:25:01.083000Z] console (info): ğŸ“Š ProgressTracker: 20 achievements have progress data (including tier upgrades)
[2025-11-17T00:25:01.083000Z] console (info): ğŸ¯ Closest milestone: Top 10 Ranker (100.0% complete - 999/10)
[2025-11-17T00:25:01.089000Z] console (info): ğŸ“Š ProgressTracker: Found 27 total achievements for user 113032
[2025-11-17T00:25:01.089000Z] console (info):    âœ… Earned: 0 | ğŸ”’ Unearned: 27
[2025-11-17T00:25:01.089000Z] console (info): ğŸ“Š ProgressTracker: 0 achievements have progress data (including tier upgrades)
[2025-11-17T00:25:01.089000Z] console (info): âœ… ProgressTracker: No achievements with progress data (user may have earned all available achievements)
[2025-11-17T00:25:01.093000Z] console (info): ğŸ“Š ProgressTracker: Found 27 total achievements for user 113032
[2025-11-17T00:25:01.094000Z] console (info):    âœ… Earned: 0 | ğŸ”’ Unearned: 27
[2025-11-17T00:25:01.094000Z] console (info): ğŸ“Š ProgressTracker: 20 achievements have progress data (including tier upgrades)
[2025-11-17T00:25:01.094000Z] console (info): ğŸ¯ Closest milestone: Top 10 Ranker (100.0% complete - 999/10)
[2025-11-17T00:25:01.100000Z] console (info): ğŸ“Š ProgressTracker: Found 27 total achievements for user 113032
[2025-11-17T00:25:01.100000Z] console (info):    âœ… Earned: 0 | ğŸ”’ Unearned: 27
[2025-11-17T00:25:01.100000Z] console (info): ğŸ“Š ProgressTracker: 0 achievements have progress data (including tier upgrades)
[2025-11-17T00:25:01.100000Z] console (info): âœ… ProgressTracker: No achievements with progress data (user may have earned all available achievements)
[2025-11-17T00:25:01.143000Z] console (info): ğŸ”Œ Worker pool client connected [object Object]
[2025-11-17T00:25:01.145000Z] console (info): ğŸ”Œ Worker pool client connected [object Object]
[2025-11-17T00:25:01.146000Z] console (info): ğŸ”Œ Worker pool client connected [object Object]
[2025-11-17T00:25:01.166000Z] console (info): ğŸ”Œ Worker pool client connected [object Object]
[2025-11-17T00:25:01.192000Z] console (info):   âœ“ Cached guidance for user 113032 / general
[2025-11-17T00:25:02.874000Z] console (info): ğŸ” getAllUserStreaks: Found 0 valid streak(s) for user 113032
[2025-11-17T00:25:02.875000Z] console (info): â±ï¸ Batch 1 completed in 2065ms (getUserStats + getUserPosition + getUserStreaks)
[2025-11-17T00:25:02.875000Z] console (info): ğŸ’¾ Cache HIT: Returning 164 products from cache (age: 3 minutes)
[2025-11-17T00:25:02.947000Z] console (info): ğŸ’¾ Metadata Cache HIT: Returning data (age: 3 minutes)
[2025-11-17T00:25:02.962000Z] console (info): â±ï¸ Batch 2 completed in 87ms (getCompletedAnimalCategories)
[2025-11-17T00:25:02.962000Z] console (info): â±ï¸ Total aggregation time: 2152ms
[2025-11-17T00:25:02.999000Z] console (info): ğŸ’¾ AchievementCache HIT: Returning 31 definitions
[2025-11-17T00:25:03.013000Z] console (info): ğŸ“Š ProgressTracker: Found 27 total achievements for user 113032
[2025-11-17T00:25:03.013000Z] console (info):    âœ… Earned: 0 | ğŸ”’ Unearned: 27
[2025-11-17T00:25:03.013000Z] console (info): ğŸ“Š ProgressTracker: 4 achievements have progress data (including tier upgrades)
[2025-11-17T00:25:03.013000Z] console (info): ğŸ¯ Closest milestone: First Steps (0.0% complete - 0/1)
[2025-11-17T00:25:03.046000Z] console (info):   âœ“ Cached guidance for user 113032 / rank
[2025-11-17T00:25:03.182000Z] console (info):   âœ“ Cached guidance for user 113032 / products
[2025-11-17T00:25:03.186000Z] console (info):   âœ“ Cached guidance for user 113032 / coinbook
[2025-11-17T00:25:03.214000Z] console (info):   âœ“ Cached guidance for user 113032 / community
[2025-11-17T00:25:03.214000Z] console (info):   âœ“ Guidance cached in database for 5 page contexts (Redis will populate on next request)
[2025-11-17T00:25:03.250000Z] console (info): âœ… Classification complete for user 113032 (5046ms)
[2025-11-17T00:25:03.287000Z] console (info): âœ… Classification job completed for user 113032
[2025-11-17T00:25:06.193000Z] console (info): ğŸ”„ Processing webhook: orders/orders/updated (job: orders:orders/updated:1763339106093)
[2025-11-17T00:25:06.193000Z] console (info): ğŸ“¦ Processing orders/updated webhook for order JK3825344700
[2025-11-17T00:25:06.193000Z] console (info): ğŸ“¦ Processing order JK3825344700: 1 line items
[2025-11-17T00:25:06.218000Z] console (info): âœ… Found existing user by Shopify ID: 113032 (bunnyds100@aol.com)
[2025-11-17T00:25:06.250000Z] console (info): âœ… Processed 1 line items for order JK3825344700 (user: 113032)
[2025-11-17T00:25:06.251000Z] console (info): ğŸ“¦ Broadcasting customer orders update to admin room (dev:admin:customer-orders): upserted - JK3825344700
[2025-11-17T00:25:06.251000Z] console (info): ğŸ”„ Invalidating purchase history cache for user 113032
[2025-11-17T00:25:06.287000Z] console (info): ğŸ—‘ï¸ Purchase cache invalidated for user 113032
[2025-11-17T00:25:06.287000Z] console (info): ğŸ”„ Recalculating ranking stats for 1 product(s)
[2025-11-17T00:25:06.303000Z] console (info): ğŸ“Š Recalculated ranking stats for 0 product(s)
[2025-11-17T00:25:06.303000Z] console (warning): âš ï¸ No ranking stats found for 1 product(s) - products may not have been ranked yet
[2025-11-17T00:25:06.339000Z] console (info): ğŸ”„ Classification throttled for user 113032 (last calc < 5 min ago)
[2025-11-17T00:25:06.339000Z] console (info): ğŸ“‹ Enqueued classification job for user 113032 (reason: purchase)
[2025-11-17T00:25:06.339000Z] console (info): âœ… Order webhook side effects completed
[2025-11-17T00:25:06.339000Z] console (info): âœ… Webhook processed: orders/orders/updated (146ms)
[2025-11-17T00:25:06.374000Z] console (info): âœ… Webhook job completed: orders/orders/updated (281ms)
[2025-11-17T00:25:30.895000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:30.896000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:30.929000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:30.929000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:31.080000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:31.086000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:31.093000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:31.100000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:33.012000Z] console (info): ğŸ”Œ Database client removed from pool [object Object]
[2025-11-17T00:25:33.046000Z] console (info): ğŸ”Œ Worker pool client removed [object Object]
[2025-11-17T00:25:33.183000Z] console (info): ğŸ”Œ Worker pool client removed [object Object]
[2025-11-17T00:25:33.187000Z] console (info): ğŸ”Œ Worker pool client removed [object Object]
[2025-11-17T00:25:33.213000Z] console (info): ğŸ”Œ Worker pool client removed [object Object]
[2025-11-17T00:25:36.305000Z] console (info): ğŸ”Œ Webhook pool client removed [object Object]
[2025-11-17T00:26:19.354000Z] console (info): ğŸ”„ Processing webhook: customers/customers/update (job: customers:customers/update:1763339179287)
[2025-11-17T00:26:19.354000Z] console (info): ğŸ“¥ Shopify customer data received: [object Object]
[2025-11-17T00:26:19.462000Z] console (info): ğŸ‘¤ Customer 5935288877144 not found in database - creating new user
[2025-11-17T00:26:19.479000Z] console (info): âœ… Created new user 113033 for Shopify customer 5935288877144
[2025-11-17T00:26:19.480000Z] console (info): ğŸ‘¤ Broadcasting customer webhook update to admin room (dev:admin:customer-webhooks): created - undefined
[2025-11-17T00:26:19.480000Z] console (info): âœ… Webhook processed: customers/customers/update (126ms)
[2025-11-17T00:26:19.513000Z] console (info): âœ… Webhook job completed: customers/customers/update (226ms)

--- TAGS ---
  app_url: undefined
  browser: undefined
  browser.name: undefined
  client_os: undefined
  client_os.name: undefined
  environment: undefined
  handled: undefined
  level: undefined
  mechanism: undefined
  os: undefined
  os.name: undefined
  runtime: undefined
  runtime.name: undefined
  server_name: undefined
  transaction: undefined
  url: undefined

--- CONTEXT ---
No context available

--- REQUEST (if applicable) ---
No request data

--- USER (if available) ---
{
  "id": null,
  "email": null,
  "username": null,
  "ip_address": null,
  "name": null,
  "geo": {
    "country_code": "US",
    "city": "The Dalles",
    "region": "United States"
  },
  "data": null
}

--- SDK INFO ---
Platform: node
SDK: sentry.javascript.node 10.19.0

=== END ANALYSIS REQUEST ===

Please analyze this error and suggest:
1. Root cause
2. Potential fixes
3. Why this error occurred
4. How to prevent it in the future